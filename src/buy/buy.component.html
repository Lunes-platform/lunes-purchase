<!--<loading show="$ctrl.loading"></loading>-->
<div class="container">

  <lunesheader showlinks="true" balanceuser="$ctrl.balanceUser.confirmed_balance"></lunesheader>

  <!-- BUY -->
  <section class="buy">
    <div class="row">
      <div class="title user-menu">
        <a href="" id="user-menu" ng-click="$ctrl.toogleUserMenu()">
          <h4>
            {{'WELCOME' | translate}}, {{$ctrl.currentUser.fullname}}
            <span ng-show="!$ctrl.showUserMenu">
              <i class="fas fa-angle-right green"></i>
            </span>
            <span ng-show="$ctrl.showUserMenu">
              <i class="fas fa-angle-down green"></i>
            </span>
          </h4>
        </a>
        <div class="logout area-button" ng-show="$ctrl.showUserMenu">
          <a href="#!/login" class="primary-button" ng-click="$ctrl.logout()">
            {{'LOGOUT' | translate}}
          </a>
        </div>
      </div>
    </div>

    <div class="col-12 error-fields" ng-show="$ctrl.showErrorForm">{{'ALL_FIELDS_REQUIRED' | translate}}</div>

    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
        <!-- ERROR LIMIT -->
        <div class="row">
          <div ng-show="$ctrl.showErrorLimit" class="col-xs-12 col-lg-12 error-limit">{{$ctrl.showErrorLimit}}</div>
        </div>

        <!-- CALCULATOR -->
        <div class="row">
          <div class="calculator col-lg-12">
            <div>
              <h5>{{'CALCULATOR' | translate}}
                <span style="cursor: pointer;" ng-click="$ctrl.showHelp()">
                  <i class="fas fa-question-circle"></i>
                </span>
              </h5>
              <p style="padding: 0 50px 0 0;">{{'CHOOSE_YOUR_COIN_TO_BUY' | translate}}</p>
            </div>
            <div class="select-coin" data-step="1" data-intro="{{'HELP_CHOOSE_COIN' | translate}}">
              <ul>
                <li ng-repeat="coin in $ctrl.coins" ng-click="$ctrl.selectCoin(coin)" ng-class="coin.selected ? 'selected': ''">
                  <img ng-src="{{coin.img}}" alt="coin.label">
                </li>
              </ul>
            </div>
            <div class="valueCripto">
              <input type="text" data-step="2" data-intro="{{'HELP_TYPE_AMOUNT' | translate}}" placeholder="{{$ctrl.msgCoinPlaceholder}}"
                ng-class="$ctrl.valueToDeposit === '' ? 'animation-color' : ''" class="input-calculator" name="value" ng-model="$ctrl.valueToDeposit"
                ng-change="$ctrl.calcValue()" />

              <div class="lunesAmount" data-step="3" data-intro="{{'HELP_OR_ENTER_LNS' | translate}}">
                <img style="position: absolute;
                top: 0;
                left: 0;
                z-index: 99;" class="flag-lns" src="https://res.cloudinary.com/luneswallet/image/upload/v1519442468/icon-lunes_qhumiw.png"
                  alt="Icon Lunes">
                <input type="text" placeholder="{{$ctrl.msgCoinPlaceholderLNS}}" class="input-calculator" name="value" ng-model="$ctrl.valueToReceive"
                  ng-change="$ctrl.calcValue('LNS')" />
              </div>
              <div class="lunes-current-price" data-step="4" data-intro="{{'HELP_CURRENT_PRICE' | translate}}">
                <small>1 LNS = {{'$' + $ctrl.currentPhaseActive.price_value}}</small>
              </div>
            </div>
            <div ng-show="$ctrl.errorTypeValueToReceive" style="padding: 0 0 10px;font-size: 11px;text-align: center;color: #cf4444;text-shadow: none;">
              {{$ctrl.errorTypeValueToReceive}}
            </div>
          </div>
        </div>

        <!-- SHOW TOTAL -->
        <div class="row" data-step="5" data-intro="{{'HELP_CHECK_TOTAL' | translate}}">
          <div class="amountBalance col-lg-12">
            <div class="total">
              <div class="result">
                <div>{{'BONUS' | translate}} {{$ctrl.percentBonus}}%</div>
                <div>{{$ctrl.bonusAmountFinal}}</div>
              </div>
              <hr />
              <div class="result">
                <div>Total</div>
                <div>{{$ctrl.getTotal()}}</div>
              </div>
            </div>
            <div style="text-align: center; margin: 10px 0 30px 0;" data-step="6" data-intro="{{'HELP_USER_MAX' | translate}}">
              * {{'BUY_LIMIT_PHASE' | translate}}
              <span style="font-size:15px;font-weight:bold">{{$ctrl.getBuyLimit();}} LNS </span>
            </div>
          </div>
        </div>
      </div>

      <!-- QR CODE -->
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" data-step="7" data-intro="{{'HELP_CLICK_VIEW_ADDRESS' | translate}}">
        <div class="area-button" ng-show="!$ctrl.showQrCode" style="margin-top: 20px;">
          <button ng-class="$ctrl.valueToDeposit ? '' : 'disabled'" class="primary-button" ng-click="$ctrl.toogleShowQrCode()">{{'VIEW_ADDRESS_TO_DEPOSIT' | translate}}</button>
        </div>
        <div class="container-qr-code col-lg-8 offset-lg-2" ng-show="$ctrl.showQrCode">
          <div class="debosit-advice">
            <span>
              {{'SEND_TO_THIS_ADDRESS' | translate}} {{$ctrl.valueToDeposit}} {{$ctrl.currentCoinSelected.name}} {{'TO' | translate}}
            </span>
            <div class="address">
              {{$ctrl.currentQRCode.address}}
            </div>
            <span>{{'DEPOSIT_CONFIRMATION_ADVICE' | translate}}</span>
          </div>
          <div class="qr-code">
            <img ng-src="{{$ctrl.currentQRCode.img}}" class="qr-code img-thumbnail img-responsive" />
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<lunesfooter />